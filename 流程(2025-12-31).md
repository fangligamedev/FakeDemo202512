# Demo 流程文档 (2025-12-31)

本文档基于 `demo_v16` 版本，完整记录当前演示的所有流程，供后续优化参考。

---

## 📌 整体架构

演示基于 **空间画布 (Spatial Canvas)** 概念，将整个流程划分为三个"区域"（Zone），用户视角随流程自动平移：

| 区域 | 名称 | 功能描述 |
|------|------|----------|
| 1 | **Trend Zone** | 趋势分析雷达，识别市场热点 |
| 2 | **Builder Zone** | AI 游戏生成引擎，自动构建游戏资产 |
| 3 | **Marketing Zone** | 营销仪表盘，数据驱动的推广分析 |

---

## 🔄 演示流程详解

> **注意**: 本项目包含两个独立的演示页面：
> - `/demo` (Trinity Demo) - 基于 InfiniteCanvas 的三代理协作演示
> - `/spatial` (Spatial Demo) - 基于 SpatialCanvas 的空间画布演示

---

## 📍 Demo 页面 (`/demo`) - Trinity Demo

**入口**: 用户访问 `/demo` 页面，点击 "Start Trinity Demo" 按钮启动。

### 架构概述

该演示展示 **三个 AI Agent 协作** 完成游戏开发全流程：

| Agent | 颜色 | 职责 |
|-------|------|------|
| **Trend Agent** | 紫色 | 市场分析、策略锁定 |
| **Builder Agent** | 蓝色 | 叙事生成、资产创建、代码编写、最终构建 |
| **Marketing Agent** | 橙色 | Steam 页面、社交传播、发布上线 |

---

#### 📝 Trinity Demo 简化流程列表 (可直接编辑优化)

> 请在下方列表中添加、删除或调整步骤顺序。

**当前流程 (共 9 步)**:

1. [ ] **Market Scan** (Trend) → 分析 Steam & Itch.io 数据 (3s)
2. [ ] **Strategy Lock** (Trend) → 锁定机会："Psych Horror AVG" (3s)
3. [ ] **Draft Narrative** (Builder) → 生成剧情结构 (3s)
4. [ ] **Assets Gen** (Builder) → 创建角色和环境 (3s)
5. [ ] **Core Logic** (Builder) → 编写游戏引擎代码 (RenPy) (5s) ⭐ 切换到 Code IDE 视图
6. [ ] **Steam Capsule** (Marketing) → 设计商店资产 (3s)
7. [ ] **Social Virality** (Marketing) → 起草推广推文 (3s)
8. [ ] **Final Build** (Builder) → 编译发布版本 (3s)
9. [ ] **Launch** (Marketing) → 发布到平台 (3s)

**您的优化方案**:

```
（请在此处写下您的优化意见）
1. [ ] **Market Scan** (Trend) → 分析 Steam & Itch.io 数据 (3s)
2. [ ] **Strategy Lock** (Trend) → 锁定机会："Psych Horror AVG" (3s)
3. [ ] **Draft Narrative** (Builder) → 生成剧情结构 (3s)
4. [ ] **Assets Gen** (Builder) → 创建角色和环境 (3s)
5. [ ] **Core Logic** (Builder) → 编写游戏引擎代码 (RenPy) (5s) ⭐ 切换到 Code IDE 视图
6. [ ] **Steam Capsule** (Marketing) → 设计商店资产 (3s)
7. [ ] **Social Virality** (Marketing) → 起草推广推文 (3s)
8. [ ] **Final Build** (Builder) → 编译发布版本 (3s)
9. [ ] **Launch** (Marketing) → 发布到平台 (3s)
```
我要优化的是3、4、5这三个步骤
我需要先通过文生图工具，把游戏成品的图片生成后让用户确认，这是否是他想要的感觉，

我需要完成这个洞察：
产品洞察：让玩家先通过文字生图确认游戏意图，再由agent system生成游戏，还可进一步生成网站等互动产品。
·产品差异：将像素级扩散模型图片理解拆分，生成互动产品，补齐链路，以图展示玩法吸引小白用户。
·用户交互创新：从Chat box转变为Picture box等，通过可交互编辑图片，降低技术难度与流程复杂度，增加用户趣味性。


---

#### 📊 Trinity Demo 详细执行流程

**Phase 0: 启动**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 点击 "Start Trinity Demo" | 清空画布 |
| 0ms | 显示 Prompt Input | 输入框出现在屏幕中央 |
| 0-3500ms | 打字动画 | 逐字显示 "Build a trending Doki-style game and market it." |
| 3500ms | 触发流程 | 输入框消失，Agent Sidebar 出现 |

---

**Step 1: Market Scan (Trend Agent)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | Agent 切换 | Sidebar 变为紫色主题 |
| 0ms | 步骤激活 | "Market Scan" 显示 "Processing..." |
| 800ms | 创建节点 | "Trend: Horror" 节点出现 (紫色边框) |
| 3000ms | 步骤完成 | 节点标记为完成 |

**Step 2: Strategy Lock (Trend Agent)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 光标移动 | 虚拟光标移动到新位置 |
| 800ms | 创建节点 | "Project: Doki" 节点出现 (蓝色边框 + HOT 标签) |
| 800ms | 连接线 | Trend → Project 连接线动画 |
| 3000ms | 步骤完成 | Trend Agent 阶段结束 |

**Step 3: Draft Narrative (Builder Agent)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | Agent 切换 | Sidebar 变为蓝色主题 |
| 800ms | 创建节点 | "Script" 节点出现 |
| 800ms | 连接线 | Project → Script 连接线 |
| 3000ms | 步骤完成 | 进入下一步 |

**Step 4: Assets Gen (Builder Agent)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 800ms | 创建节点 | "Assets" 节点出现 (Monika & BG) |
| 800ms | 连接线 | Project → Assets |
| 3000ms | 步骤完成 | 进入下一步 |

**Step 5: Core Logic (Builder Agent) ⭐ 重点步骤**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 视图切换 | 从 Canvas 切换到 **Code IDE** 视图 |
| 0ms | IDE 界面 | 显示完整 VS Code 风格编辑器 |
| 0-5000ms | 代码打字 | 逐字符显示 RenPy Python 代码 (~40 行) |
| 5000ms | 终端输出 | 显示编译日志和警告 |
| 5000ms | 步骤完成 | 进入下一步 |

**Step 6: Steam Capsule (Marketing Agent)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | Agent 切换 | Sidebar 变为橙色主题 |
| 0ms | 视图切换 | 返回 Canvas 视图 |
| 800ms | 创建节点 | "Steam Page" 节点出现 (橙色边框) |
| 3000ms | 步骤完成 | 进入下一步 |

**Step 7: Social Virality (Marketing Agent)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 800ms | 创建节点 | "Viral Tweet" 节点出现 |
| 800ms | 连接线 | Steam → Social |
| 3000ms | 步骤完成 | 进入下一步 |

**Step 8: Final Build (Builder Agent)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | Agent 切换 | Sidebar 变回蓝色 |
| 800ms | 创建节点 | "Release" 节点出现 (带 ✓ 图标) |
| 800ms | 连接线 | Engine → Build |
| 3000ms | 步骤完成 | 进入最后步骤 |

**Step 9: Launch (Marketing Agent)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 视图切换 | 切换到 **Preview** 视图 |
| 0ms | 视频播放 | 自动播放 `doki_dialogue.mp4` |
| ∞ | 演示结束 | 循环播放视频 |

---

#### ⏱ Trinity Demo 时间线总结

| 阶段 | 步骤数 | 时长 | 累计 |
|------|--------|------|------|
| 启动 (Prompt) | - | ~4s | 4s |
| Trend Agent | 2 步 | ~6s | 10s |
| Builder Agent (前半) | 3 步 | ~11s | 21s |
| Marketing Agent | 2 步 | ~6s | 27s |
| Builder Agent (后半) | 1 步 | ~3s | 30s |
| Launch + Preview | 1 步 | ~3s | 33s |
| **总计** | 9 步 | - | **约 33 秒** |

---

## 📍 Spatial 页面 (`/spatial`) - Spatial Demo


### 阶段 1: Trend Zone (趋势分析)

**入口**: 用户访问 `/spatial` 页面后自动进入。

**展示内容**:
1. **趋势雷达动画** (`TrendRadar` 组件)
   - 四维雷达图：GENRE / ART / TECH / SOCIAL
   - 动态多边形数据可视化
   - 文字提示："Processing 4.2M Data Points..."
2. **分析完成** → 显示 "TARGET IDENTIFIED: CYBERPUNK RPG"

**时长**: 用户点击 "Begin Analysis" 后约 3 秒。

**触发下一阶段**: `handleTrendDone()` → 显示 Prompt Overlay。

#### 📝 Trend Zone 简化流程列表 (可直接编辑优化)

> 请在下方列表中添加、删除或调整步骤顺序。

**当前流程**:

1. [ ] **页面加载** → 显示趋势分析覆盖层
2. [ ] **等待交互** → 用户点击 "Begin Analysis" 按钮
3. [ ] **雷达动画** → 四维雷达图绘制 + 数据多边形动画 (1s)
4. [ ] **分析中提示** → 显示 "Processing 4.2M Data Points..." (2s)
5. [ ] **结果展示** → 显示 "TARGET IDENTIFIED: CYBERPUNK RPG"
6. [ ] **触发过渡** → 进入 Prompt Overlay

**您的优化方案**:

```
（请在此处写下您的优化意见）
```

---

### 阶段 1.5: AI Prompt Overlay (输入模拟)

**展示内容**:
- 模拟 AI 接收指令的打字效果
- 文案: `"Generate a Cyberpunk RPG based on these trends, focusing on neon aesthetics and netrunner mechanics."`

**时长**: 打字动画约 5 秒 + 1 秒延迟。

**触发下一阶段**: `handleGamePromptDone()` → 相机平移至 Builder Zone。

#### 📝 Prompt Overlay 简化流程列表 (可直接编辑优化)

> 请在下方列表中添加、删除或调整步骤顺序。

**当前流程**:

1. [ ] **覆盖层出现** → 半透明背景 + 输入框 UI
2. [ ] **打字动画** → 逐字显示 AI 指令文案 (50ms/字符)
3. [ ] **光标闪烁** → 打字完成后闪烁光标 (1s)
4. [ ] **触发过渡** → 相机平移至 Builder Zone (2s 动画)

**您的优化方案**:

```
（请在此处写下您的优化意见）
```

---


### 阶段 2: Builder Zone (游戏生成) ⭐ 重点优化区域

**展示内容**:
- 右侧 **Builder Sidebar** 显示任务进度列表
- 中央画布动态生成 **节点 (Nodes)**，节点间用曲线连接
- 每个节点代表一个生成步骤

---

#### � Builder 阶段简化流程列表 (可直接编辑优化)

> 请在下方列表中添加、删除或调整步骤顺序，完成后告诉我您的优化方案。

**当前流程**:

1. [ ] **GDD 生成** → 生成游戏设计文档 (4s)
2. [ ] **剧情生成** → 生成非线性叙事草稿 (4s)
3. [ ] **角色生成** → 生成像素角色精灵 (3s)
4. [ ] **场景生成** → 生成环境艺术 (3s)
5. [ ] **UI 生成** → 生成 HUD 界面 (3s)
6. [ ] **代码生成** → 生成玩家控制器脚本 (5s)
7. [ ] **资产集成** → 资产管线链接 (1.5s)
8. [ ] **优化压缩** → 纹理压缩 (1.5s)
9. [ ] **构建编译** → WebGL 编译 (2s)
10. [ ] **部署上线** → 推送至边缘云 (1s)

**您的优化方案**:

```
（请在此处写下您的优化意见，例如：
- 合并步骤 7-10 为一个"工程化"步骤
- 在步骤 3 前增加"风格选择"环节
- 删除某个不必要的步骤
- 调整步骤顺序
- 修改展示时长
等）
```

---

#### 📊 详细流程分解 (供参考)


#### �🔹 子阶段 2.1: 设计文档生成 (Design Documents)

| 步骤 | Step ID | 标题 | 时长 | 资产 |
|------|---------|------|------|------|
| 1 | `step_gdd` | Generate Game Design | 4000ms | `game_design_doc.md` |
| 2 | `step_story` | Draft Story | 4000ms | `story_draft.md` |

**详细执行流程**:

**Step 1: Generate Game Design (`step_gdd`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 节点出现在画布，Sidebar 高亮此步骤 |
| 500ms | 鼠标移动 | 虚拟光标移动到节点位置 |
| 1300ms | 模拟点击 | 光标缩放动画 |
| 1500ms | 打开模态框 | `AssetPreviewModal` 打开，显示 "GENERATING..." |
| 3000ms | 内容显示 | 打字效果逐字显示 GDD 内容 |
| 4000ms | 关闭模态框 | 模态框关闭，节点标记为完成 |

**Step 2: Draft Story (`step_story`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 节点出现，曲线连接上一节点 |
| 500ms | 鼠标移动 | 虚拟光标移动到新节点 |
| 1300ms | 模拟点击 | 光标缩放 |
| 1500ms | 打开模态框 | 显示 "GENERATING..." |
| 3000ms | 内容显示 | 打字效果显示剧情草稿 |
| 4000ms | 关闭模态框 | 进入下一步骤 |

**优化空间**: `[请在此填写您的优化意见]`

---

#### 🔹 子阶段 2.2: 视觉资产生成 (Visual Assets)

| 步骤 | Step ID | 标题 | 时长 | 资产 |
|------|---------|------|------|------|
| 3 | `step_char` | Character | 3000ms | `char_hero.png` |
| 4 | `step_scene` | Scene | 3000ms | `scene_city.png` |
| 5 | `step_ui` | UI Design | 3000ms | `ui_hud.png` |

**详细执行流程**:

**Step 3: Character (`step_char`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 新节点出现 |
| 500ms | 鼠标移动 | 光标移动 |
| 1300ms | 模拟点击 | 点击动画 |
| 1500ms | 打开模态框 | 显示 "GENERATING PIXEL ART..." 动画 |
| 1500ms | 图片淡入 | 角色图像从模糊到清晰渐显 |
| 3000ms | 关闭模态框 | 步骤完成 |

**Step 4: Scene (`step_scene`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 场景节点出现 |
| 500ms | 鼠标移动 | 光标移动 |
| 1300ms | 模拟点击 | 点击 |
| 1500ms | 打开模态框 | "GENERATING..." 动画 |
| 1500ms | 图片淡入 | 城市场景显示 |
| 3000ms | 关闭模态框 | 完成 |

**Step 5: UI Design (`step_ui`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | UI 节点出现 |
| 500ms | 鼠标移动 | 光标移动 |
| 1300ms | 模拟点击 | 点击 |
| 1500ms | 打开模态框 | "GENERATING..." |
| 1500ms | 图片淡入 | HUD 界面显示 |
| 3000ms | 关闭模态框 | 完成 |

**优化空间**: `[请在此填写您的优化意见]`

---

#### 🔹 子阶段 2.3: 代码生成 (Code Generation)

| 步骤 | Step ID | 标题 | 时长 | 资产 |
|------|---------|------|------|------|
| 6 | `step_logic` | Logic | 5000ms | `player_controller.cs` |

**详细执行流程**:

**Step 6: Logic (`step_logic`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 代码节点出现 |
| 500ms | 鼠标移动 | 光标移动 |
| 1300ms | 模拟点击 | 点击 |
| 1500ms | 打开模态框 | IDE 风格界面打开 |
| 1500ms-5000ms | 代码打字 | 逐字符显示 C# 代码，带语法高亮 |
| 5000ms | 关闭模态框 | 完成 |

**代码内容预览**:
```csharp
public class GlitchHunterController : MonoBehaviour {
    public float moveSpeed = 8f;
    public float dashDistance = 5f;
    // ... (41 行代码)
}
```

**优化空间**: `[请在此填写您的优化意见]`

---

#### 🔹 子阶段 2.4: 工程化处理 (Engineering Pipeline)

| 步骤 | Step ID | 标题 | 时长 | 资产 |
|------|---------|------|------|------|
| 7 | `step_integration` | Integration | 1500ms | 无 |
| 8 | `step_optimization` | Optimization | 1500ms | 无 |
| 9 | `step_build` | Build | 2000ms | 无 |
| 10 | `step_deploy` | Deployment | 1000ms | 无 |

**详细执行流程**:

**Step 7: Integration (`step_integration`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 节点出现，Sidebar 状态更新 |
| 0ms-1500ms | 等待 | 仅显示 "Processing..." 文字 |
| 1500ms | 完成 | 节点标记完成，进入下一步 |

**Step 8: Optimization (`step_optimization`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 优化节点出现 |
| 0ms-1500ms | 等待 | "Compressing textures." |
| 1500ms | 完成 | 进入下一步 |

**Step 9: Build (`step_build`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 构建节点出现 |
| 0ms-2000ms | 等待 | "Compiling WebGL binaries." |
| 2000ms | 完成 | 进入下一步 |

**Step 10: Deployment (`step_deploy`)**
| 时间点 | 动作 | UI 变化 |
|--------|------|---------|
| 0ms | 创建节点 | 部署节点出现 |
| 0ms-1000ms | 等待 | "Pushing to cloud edge." |
| 1000ms | 完成 | Builder Zone 结束 |

**优化空间**: `[请在此填写您的优化意见]`

---

#### 📊 Builder Zone 时间分布图

```
子阶段 2.1 (设计文档):  ████████████████ 8s  (29%)
子阶段 2.2 (视觉资产):  ██████████████   9s  (32%)
子阶段 2.3 (代码生成):  ██████████       5s  (18%)
子阶段 2.4 (工程化):    ██████           6s  (21%)
─────────────────────────────────────────────────
总计:                                    28s (100%)
```

**交互逻辑总结**:
1. 每个步骤创建一个节点
2. 如果步骤有 `uiAction: 'AUTO_PREVIEW'`：
   - 模拟鼠标移动到节点位置 (500ms)
   - 模拟点击 (800ms travel + 200ms click)
   - 打开资产预览模态框，显示 "生成中" 动画 (1500ms)
   - 显示实际内容
   - 等待剩余时长后关闭
3. 无资产的步骤（7-10）仅等待其 duration，无模态框交互

**总时长**: 约 28 秒。

---

### 阶段 3: Marketing Zone (营销推广)

**展示内容**:
- 相机平移至 Marketing Zone
- 继续创建节点

**步骤明细**:

| # | Step ID | 标题 | 描述 | 时长 (ms) | 资产类型 | 资产路径 |
|---|---------|------|------|-----------|----------|----------|
| 11 | `step_video` | Game Video (VEO 3.1) | Generating gameplay trailer... | 12000 | Video | `/assets/demo_v16/pixel_game_demo.mp4` |
| 12 | `step_marketing_dashboard` | Campaign Dashboard | Real-time analytics setup... | 8000 | Dashboard | `/assets/demo_v16/dashboard_data.json` |
| 13 | `step_marketing_web` | Official Website | Generating landing page... | 4000 | Image | `/assets/demo_v16/website_landing.png` |

**特殊展示**:
- **视频步骤** (`step_video`): 显示 "Generating Game" 加载动画，完成后播放 `pixel_game_demo.mp4`
- **Dashboard 步骤**: 渲染 `MarketingDashboard` 组件，展示模拟数据

**总时长**: 约 24 秒。

---

## 🎨 UI 组件清单

| 组件名 | 用途 | 所在文件 |
|--------|------|----------|
| `SpatialCanvas` | 主演示容器，管理区域切换和节点渲染 | `SpatialCanvas.tsx` |
| `TrendRadar` | 趋势分析雷达图 | `SpatialCanvas.tsx` |
| `TrendOverlay` | Trend Zone 全屏覆盖层 | `SpatialCanvas.tsx` |
| `PromptOverlay` | AI 输入打字效果覆盖层 | `SpatialCanvas.tsx` |
| `BuilderSidebar` | Builder Zone 右侧任务进度条 | `SpatialCanvas.tsx` |
| `AssetPreviewModal` | 资产预览模态框 (支持图片/代码/视频/Dashboard) | `SpatialCanvas.tsx` |
| `MarketingDashboard` | 营销数据仪表盘 | `MarketingDashboard.tsx` |
| `Cursor` | 虚拟鼠标指针动画 | `SpatialCanvas.tsx` |

---

## 📁 资产文件清单

| 文件名 | 类型 | 用途 |
|--------|------|------|
| `game_design_doc.md` | Markdown | 游戏设计文档 (GDD) |
| `story_draft.md` | Markdown | 剧情草稿 |
| `char_hero.png` | Image | 主角像素精灵 |
| `scene_city.png` | Image | 城市场景艺术 |
| `ui_hud.png` | Image | 游戏 HUD 界面 |
| `player_controller.cs` | Code | 玩家控制器脚本 |
| `pixel_game_demo.mp4` | Video | 游戏演示视频 |
| `doki_dialogue.mp4` | Video | (备用) 对话演示视频 |
| `dashboard_data.json` | JSON | 营销仪表盘模拟数据 |
| `marketing_dashboard.png` | Image | (静态) 营销仪表盘截图 |
| `gameplay_thumb.png` | Image | 视频缩略图 |
| `creator_avatar.png` | Image | 创作者头像 |

---

## ⏱ 时间线总结

| 阶段 | 时长 | 累计 |
|------|------|------|
| Trend Zone | ~3s | 3s |
| Prompt Overlay | ~6s | 9s |
| Builder Zone | ~28s | 37s |
| Marketing Zone | ~24s | 61s |
| **总计** | - | **约 1 分钟** |

---

## 🔧 待优化建议

> 此部分留空，待用户补充优化方向。

1. 
2. 
3. 

---

*文档生成时间: 2025-12-31 15:58*
